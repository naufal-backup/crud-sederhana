(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))e(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();class v{constructor(t){this.config=t,this._k=`gc:${t.repoOwner}/${t.repoName}`}getToken(){return sessionStorage.getItem(`${this._k}:token`)}setToken(t){sessionStorage.setItem(`${this._k}:token`,t)}clearSession(){["token","user","role"].forEach(t=>sessionStorage.removeItem(`${this._k}:${t}`))}login(){const t=this.config.redirectUri||`${location.origin}${location.pathname.replace(/\/[^/]*$/,"")}/callback.html`,s=new URLSearchParams({client_id:this.config.clientId,redirect_uri:t,scope:this.config.scope||"repo"});location.href=`https://github.com/login/oauth/authorize?${s}`}logout(){this.clearSession(),location.reload()}async exchangeCode(t){const s=this.config.workerUrl.replace(/\/$/,"")+"/exchange",a=await(await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})})).json();if(!a.access_token)throw new Error(a.error||"Token tidak diterima dari worker.");return a.access_token}async _gh(t,s,e={}){return fetch(`https://api.github.com${t}`,{...e,headers:{Authorization:`Bearer ${s}`,Accept:"application/vnd.github+json",...e.headers}})}async getUser(t){const s=await this._gh("/user",t);if(!s.ok)throw new Error("Gagal mengambil profil GitHub. Coba login ulang.");return s.json()}async isCollaborator(t,s){const{repoOwner:e,repoName:a}=this.config;return(await this._gh(`/repos/${e}/${a}/collaborators/${s}`,t)).status===204}async detectRole(t,s){const{collections:e=[],roles:a=[],repoOwner:i}=this.config,r=e.find(n=>n.schema?.some(o=>["github","username"].includes(o.key)));if(r)try{const{repoName:n}=this.config,o=await this._gh(`/repos/${i}/${n}/contents/${r.file}`,t);if(o.ok){const c=await o.json(),u=JSON.parse(atob(c.content.replace(/\n/g,""))).find(h=>h.github===s||h.username===s);if(u?.role&&a.includes(u.role))return u.role}}catch{}return s===i&&a.length?a[0]:a[a.length-1]||"viewer"}async init(){const t=this.getToken();if(!t)return null;const s=sessionStorage.getItem(`${this._k}:user`);if(s)return{user:JSON.parse(s),role:sessionStorage.getItem(`${this._k}:role`),token:t};const e=await this.getUser(t);if(!await this.isCollaborator(t,e.login))throw this.clearSession(),new Error(`@${e.login} bukan collaborator repo ${this.config.repoOwner}/${this.config.repoName}.`);const i=await this.detectRole(t,e.login);return sessionStorage.setItem(`${this._k}:user`,JSON.stringify(e)),sessionStorage.setItem(`${this._k}:role`,i),{user:e,role:i,token:t}}}class S{constructor(t,s){this.config=t,this._token=s}_base(){const{repoOwner:t,repoName:s}=this.config;return`https://api.github.com/repos/${t}/${s}/contents`}_headers(t={}){return{Authorization:`Bearer ${this._token}`,Accept:"application/vnd.github+json","Content-Type":"application/json",...t}}async read(t){const s=await fetch(`${this._base()}/${t}`,{headers:this._headers()});if(s.status===404)return{data:[],sha:null};if(!s.ok)throw new Error(`Gagal membaca ${t} (${s.status})`);const e=await s.json(),a=JSON.parse(atob(e.content.replace(/\n/g,"")));return{data:Array.isArray(a)?a:[],sha:e.sha}}async write(t,s,e,a){const i=btoa(unescape(encodeURIComponent(JSON.stringify(s,null,2)))),r={message:a,content:i};e&&(r.sha=e);const n=await fetch(`${this._base()}/${t}`,{method:"PUT",headers:this._headers(),body:JSON.stringify(r)});if(!n.ok){const c=await n.json().catch(()=>({}));throw new Error(c.message||`Gagal menyimpan ${t}`)}return(await n.json()).content.sha}async getAll(t){return this.read(t.file)}async insert(t,s,e){const{data:a,sha:i}=await this.read(t.file),r=t.schema?.find(c=>c.auto);r&&(s[r.key]=a.reduce((c,l)=>Math.max(c,Number(l[r.key])||0),0)+1),t.timestamps&&(s.createdAt=new Date().toISOString(),s.updatedAt=new Date().toISOString());const n=[...a,s],o=await this.write(t.file,n,i,`[github-crud] Add to ${t.label} by @${e}`);return{record:s,sha:o}}async update(t,s,e,a){const{data:i,sha:r}=await this.read(t.file),n=t.schema?.find(l=>l.auto)?.key||"id",o=i.findIndex(l=>String(l[n])===String(s));if(o===-1)throw new Error(`Record dengan id=${s} tidak ditemukan.`);t.timestamps&&(e.updatedAt=new Date().toISOString()),i[o]={...i[o],...e};const c=await this.write(t.file,i,r,`[github-crud] Update ${t.label}#${s} by @${a}`);return{record:i[o],sha:c}}async remove(t,s,e){const{data:a,sha:i}=await this.read(t.file),r=t.schema?.find(c=>c.auto)?.key||"id",n=a.filter(c=>String(c[r])!==String(s));if(n.length===a.length)throw new Error(`Record dengan id=${s} tidak ditemukan.`);return{sha:await this.write(t.file,n,i,`[github-crud] Delete ${t.label}#${s} by @${e}`)}}async query(t,{filter:s,sort:e,order:a="asc",limit:i,offset:r=0}={}){const{data:n}=await this.read(t.file);let o=[...n];s&&(o=o.filter(l=>Object.entries(s).every(([u,h])=>String(l[u])===String(h)))),e&&o.sort((l,u)=>{const h=String(l[e]??"").localeCompare(String(u[e]??""),void 0,{numeric:!0});return a==="desc"?-h:h});const c=o.length;return r&&(o=o.slice(r)),i&&(o=o.slice(0,i)),{data:o,total:c}}}const _={none:0,read:1,write:2,all:3};class T{constructor(t){this.role=t}_lv(t){return _[t.roles?.[this.role]]??0}canRead(t){return this._lv(t)>=_.read}canWrite(t){return this._lv(t)>=_.write}canDelete(t){return this._lv(t)>=_.all}get(t){return t.roles?.[this.role]||"none"}}const L={text:"text",email:"email",url:"url",number:"number",date:"date",datetime:"datetime-local",color:"color",password:"password"};class b{static build(t,s={}){return t.map(e=>b._field(e,s)).join("")}static _field(t,s){if(t.auto&&s[t.key]===void 0)return"";const e=s[t.key]??t.default??"",a=t.readonly||t.auto&&s[t.key]!==void 0,i=t.required&&!a?'<span class="gc-req">*</span>':"",r=t.hint?`<div class="gc-field-hint">${m(t.hint)}</div>`:"";let n;if(t.type==="boolean"){const o=e===!0||e==="true"?"checked":"";n=`<div class="gc-toggle-wrap">
        <label class="gc-toggle">
          <input type="checkbox" name="${t.key}" ${o} ${a?"disabled":""}>
          <span class="gc-toggle-track"></span>
        </label>
        <span class="gc-toggle-label" data-gc-toggle-label="${t.key}">
          ${e===!0||e==="true"?t.trueLabel||"Ya":t.falseLabel||"Tidak"}
        </span>
      </div>`}else if(t.type==="select"){const o=(t.options||[]).map(c=>{const l=typeof c=="object"?c.value:c,u=typeof c=="object"?c.label:c;return`<option value="${m(l)}" ${l==e?"selected":""}>${m(u)}</option>`}).join("");n=`<select name="${t.key}" class="gc-control gc-select" ${a?"disabled":""}>
        <option value="">‚Äî Pilih ‚Äî</option>${o}
      </select>`}else t.type==="textarea"?n=`<textarea name="${t.key}" class="gc-control" rows="${t.rows||3}"
        placeholder="${m(t.placeholder||"")}"
        ${a?"readonly":""}
        ${t.required&&!a?"required":""}
      >${m(String(e))}</textarea>`:n=`<input type="${L[t.type]||"text"}" name="${t.key}" class="gc-control"
        value="${m(String(e))}"
        placeholder="${m(t.placeholder||"")}"
        ${a?"readonly":""}
        ${t.required&&!a?"required":""}
        ${t.min!==void 0?`min="${t.min}"`:""}
        ${t.max!==void 0?`max="${t.max}"`:""}
        ${t.step!==void 0?`step="${t.step}"`:""}
        ${t.minLength?`minlength="${t.minLength}"`:""}
        ${t.maxLength?`maxlength="${t.maxLength}"`:""}
        ${t.pattern?`pattern="${t.pattern}"`:""}
      />`;return`<div class="gc-field" data-key="${t.key}">
      <label class="gc-label">${m(t.label)} ${i}</label>
      ${n}${r}
    </div>`}static collect(t,s){const e={};for(const a of t){const i=s.querySelector(`[name="${a.key}"]`);i&&(a.type==="boolean"?e[a.key]=i.checked:a.type==="number"?e[a.key]=i.value===""?null:Number(i.value):e[a.key]=i.value)}return e}static validate(t,s){for(const e of t){if(e.auto||e.readonly)continue;const a=s[e.key],i=a==null||a==="";if(e.required&&i)return`"${e.label}" wajib diisi.`;if(!i){if(e.type==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a))return`"${e.label}" harus berformat email yang valid.`;if(e.type==="url"&&!/^https?:\/\/.+/.test(a))return`"${e.label}" harus diawali https://.`;if(e.type==="number"){if(e.min!==void 0&&a<e.min)return`"${e.label}" minimal ${e.min}.`;if(e.max!==void 0&&a>e.max)return`"${e.label}" maksimal ${e.max}.`}if(e.minLength&&String(a).length<e.minLength)return`"${e.label}" minimal ${e.minLength} karakter.`;if(e.maxLength&&String(a).length>e.maxLength)return`"${e.label}" maksimal ${e.maxLength} karakter.`;if(e.pattern&&!new RegExp(e.pattern).test(a))return`"${e.label}" format tidak valid.`}}return null}static bindToggles(t){t.querySelectorAll(".gc-toggle input[type=checkbox]").forEach(s=>{const e=t.querySelector(`[data-gc-toggle-label="${s.name}"]`);if(!e)return;const a=t._gcSchema?.find(i=>i.key===s.name);s.addEventListener("change",()=>{e.textContent=s.checked?a?.trueLabel||"Ya":a?.falseLabel||"Tidak"})})}}function m(d){return String(d).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}const p=25;function g(d){return String(d).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}class q{constructor({collection:t,db:s,permissions:e,user:a,onStatus:i,onToast:r}){this.col=t,this.db=s,this.perm=e,this.user=a,this.onStatus=i||(()=>{}),this.onToast=r||(()=>{}),this._data=[],this._sha=null,this._sort=null,this._dir="asc",this._q="",this._page=1,this._root=null,this._modal=null}mount(t,s){if(this._root=typeof t=="string"?document.querySelector(t):t,this._modal=typeof s=="string"?document.querySelector(s):s,!this._root)throw new Error(`[github-crud] Container "${t}" tidak ditemukan.`);return this.refresh(),this}async refresh(){this.onStatus("loading");try{const{data:t,sha:s}=await this.db.getAll(this.col);this._data=t,this._sha=s,this._draw(),this.onStatus("ready",t.length)}catch(t){this.onStatus("error",t.message),this.onToast(t.message,"error")}}_draw(){const{col:t,perm:s}=this,a=(t.schema||[]).filter(h=>!h.hidden),i=s.canRead(t),r=s.canWrite(t),n=s.canDelete(t);let o=[...this._data];if(this._q){const h=this._q.toLowerCase();o=o.filter($=>a.some(y=>String($[y.key]??"").toLowerCase().includes(h)))}this._sort&&o.sort((h,$)=>{const y=String(h[this._sort]??"").localeCompare(String($[this._sort]??""),void 0,{numeric:!0});return this._dir==="desc"?-y:y});const c=o.length,l=Math.max(1,Math.ceil(c/p));this._page=Math.min(this._page,l);const u=o.slice((this._page-1)*p,this._page*p);this._root.innerHTML=`
      <div class="gc-wrap">
        ${this._drawToolbar(c,r)}
        ${i?u.length===0?this._drawEmpty(r):`<div class="gc-scroll">
                <table class="gc-table">
                  ${this._drawHead(a,r||n)}
                  ${this._drawBody(u,a,r,n)}
                </table>
              </div>
              ${l>1?this._drawPager(c,l):""}`:'<div class="gc-empty"><span>üîí</span><p>Kamu tidak punya akses ke tabel ini.</p></div>'}
      </div>`,this._bind()}_drawToolbar(t,s){return`<div class="gc-toolbar">
      <input class="gc-search" placeholder="Cari‚Ä¶" value="${g(this._q)}" data-gc="search"/>
      <div class="gc-toolbar-r">
        <span class="gc-count">${t} baris</span>
        <button class="gc-btn gc-ghost gc-sm" data-gc="refresh">‚Üª Refresh</button>
        ${s?'<button class="gc-btn gc-primary gc-sm" data-gc="add">+ Tambah</button>':""}
      </div>
    </div>`}_drawEmpty(t){return`<div class="gc-empty">
      <span>üì≠</span>
      <p>${this._q?"Tidak ada hasil.":"Belum ada data di tabel ini."}</p>
      ${t&&!this._q?'<button class="gc-btn gc-primary" data-gc="add" style="margin-top:.75rem">+ Tambah data pertama</button>':""}
    </div>`}_drawHead(t,s){return`<thead><tr>${t.map(a=>`<th class="gc-th ${this._sort===a.key?`gc-sort-${this._dir}`:""}" data-gc="sort" data-key="${a.key}">${g(a.label)}</th>`).join("")}${s?'<th class="gc-th gc-th-act">Aksi</th>':""}</tr></thead>`}_drawBody(t,s,e,a){const i=this.col.schema?.find(r=>r.auto)?.key||"id";return`<tbody>${t.map(r=>{const n=r[i],o=s.map(l=>`<td class="gc-td" title="${g(String(r[l.key]??""))}">${this._cell(l,r[l.key])}</td>`).join(""),c=e||a?`<td class="gc-td gc-td-act">
        ${e?`<button class="gc-btn gc-outline gc-sm" data-gc="edit" data-id="${n}">‚úè Edit</button>`:""}
        ${a?`<button class="gc-btn gc-danger  gc-sm" data-gc="del"  data-id="${n}">‚úï</button>`:""}
      </td>`:"";return`<tr class="gc-tr">${o}${c}</tr>`}).join("")}</tbody>`}_cell(t,s){if(s==null)return'<span class="gc-null">‚Äì</span>';if(t.type==="boolean")return s?'<span class="gc-badge gc-badge-ok">‚úì Ya</span>':'<span class="gc-badge gc-badge-off">‚úó Tidak</span>';if(t.type==="select")return`<span class="gc-badge">${g(String(s))}</span>`;if(t.type==="url")return`<a class="gc-link" href="${g(String(s))}" target="_blank" rel="noopener">${g(String(s))}</a>`;if(t.type==="date"||t.type==="datetime")try{return new Date(s).toLocaleString("id-ID",{dateStyle:"medium",...t.type==="datetime"?{timeStyle:"short"}:{}})}catch{return g(String(s))}const e=String(s);return g(e.length>64?e.slice(0,61)+"‚Ä¶":e)}_drawPager(t,s){const e=this._page,a=(e-1)*p+1,i=Math.min(e*p,t);let r="";for(let n=1;n<=s;n++)n===1||n===s||Math.abs(n-e)<=1?r+=`<button class="gc-pg ${n===e?"gc-pg-on":""}" data-gc="page" data-p="${n}">${n}</button>`:Math.abs(n-e)===2&&(r+='<span class="gc-pg-dot">‚Ä¶</span>');return`<div class="gc-pager">
      <button class="gc-pg" data-gc="page" data-p="${e-1}" ${e<=1?"disabled":""}>‚Äπ</button>
      ${r}
      <button class="gc-pg" data-gc="page" data-p="${e+1}" ${e>=s?"disabled":""}>‚Ä∫</button>
      <span class="gc-pager-info">${a}‚Äì${i} dari ${t}</span>
    </div>`}_bind(){const t=(e,a,i)=>this._root.querySelectorAll(e).forEach(r=>r.addEventListener(a,i));let s;this._root.querySelector('[data-gc="search"]')?.addEventListener("input",e=>{clearTimeout(s),s=setTimeout(()=>{this._q=e.target.value,this._page=1,this._draw()},220)}),t('[data-gc="refresh"]',"click",()=>this.refresh()),t('[data-gc="add"]',"click",()=>this._openForm(null)),t('[data-gc="sort"]',"click",e=>{const a=e.currentTarget.dataset.key;this._dir=this._sort===a&&this._dir==="asc"?"desc":"asc",this._sort=a,this._draw()}),t('[data-gc="edit"]',"click",e=>{const a=this.col.schema?.find(n=>n.auto)?.key||"id",i=e.currentTarget.dataset.id,r=this._data.find(n=>String(n[a])===i);r&&this._openForm(r)}),t('[data-gc="del"]',"click",e=>this._confirmDel(e.currentTarget.dataset.id)),t('[data-gc="page"]',"click",e=>{const a=Number(e.currentTarget.dataset.p),i=Math.ceil(this._data.length/p);a>=1&&a<=i&&(this._page=a,this._draw())})}_ensureModal(){return this._modal||(this._modal=document.createElement("div"),this._modal.className="gc-modal",document.body.appendChild(this._modal)),this._modal}_openForm(t){const s=this._ensureModal(),e=t!==null,a=this.col.schema||[];s.innerHTML=`<div class="gc-modal-box">
      <div class="gc-modal-head">
        <span class="gc-modal-title">${e?`‚úè Edit ‚Äî ${g(this.col.label)}`:`+ Tambah ‚Äî ${g(this.col.label)}`}</span>
        <button class="gc-modal-x" data-gc="close">‚úï</button>
      </div>
      <div class="gc-modal-body">${b.build(a,t||{})}</div>
      <div class="gc-modal-foot">
        <button class="gc-btn gc-ghost gc-sm" data-gc="close">Batal</button>
        <button class="gc-btn gc-primary gc-sm" data-gc="submit">Simpan</button>
      </div>
    </div>`,s.classList.add("gc-open"),b.bindToggles(s),s.querySelectorAll('[data-gc="close"]').forEach(i=>i.addEventListener("click",()=>this._closeModal())),s.querySelector('[data-gc="submit"]')?.addEventListener("click",()=>this._submit(a,t))}_closeModal(){this._modal?.classList.remove("gc-open")}async _submit(t,s){const e=this._modal.querySelector(".gc-modal-body"),a=b.collect(t,e),i=b.validate(t,a);if(i){this.onToast(i,"warn");return}this._closeModal(),this.onStatus("saving");try{const r=t.find(n=>n.auto)?.key||"id";s?(await this.db.update(this.col,s[r],a,this.user.login),this.onToast("Data berhasil diperbarui.","success")):(await this.db.insert(this.col,a,this.user.login),this.onToast("Data berhasil ditambahkan.","success")),await this.refresh()}catch(r){this.onStatus("error",r.message),this.onToast(r.message,"error")}}async _confirmDel(t){const s=this.col.schema?.find(r=>r.auto)?.key||"id",e=this._data.find(r=>String(r[s])===t),a=e?Object.values(e).slice(1,3).join(" ¬∑ "):`id=${t}`;if(await this._confirm("Hapus data ini?",`${a}

Tindakan ini tidak dapat dibatalkan.`)){this.onStatus("saving");try{await this.db.remove(this.col,t,this.user.login),this.onToast("Data berhasil dihapus.","success"),await this.refresh()}catch(r){this.onStatus("error",r.message),this.onToast(r.message,"error")}}}_confirm(t,s){return new Promise(e=>{const a=this._ensureModal();a.innerHTML=`<div class="gc-modal-box gc-modal-sm">
        <div class="gc-modal-head"><span class="gc-modal-title">${g(t)}</span></div>
        <div class="gc-modal-body"><p class="gc-confirm-msg">${g(s)}</p></div>
        <div class="gc-modal-foot">
          <button class="gc-btn gc-ghost gc-sm"  data-ans="false">Batal</button>
          <button class="gc-btn gc-danger gc-sm" data-ans="true">Ya, Hapus</button>
        </div>
      </div>`,a.classList.add("gc-open"),a.querySelectorAll("[data-ans]").forEach(i=>i.addEventListener("click",()=>{this._closeModal(),e(i.dataset.ans==="true")}))})}}function k(){let d=document.querySelector(".gc-toasts");return d||(d=Object.assign(document.createElement("div"),{className:"gc-toasts"}),document.body.appendChild(d)),function(t,s="info",e=3500){const a={success:"‚úÖ",error:"‚ùå",warn:"‚ö†Ô∏è",info:"‚ÑπÔ∏è"},i=Object.assign(document.createElement("div"),{className:`gc-toast gc-toast-${s}`,innerHTML:`<span>${a[s]||""}</span><span>${t}</span>`});d.appendChild(i),setTimeout(()=>i.remove(),e)}}class w{constructor(t){this._cfg=t,this._auth=new v(t),this._db=null,this._perm=null,this._user=null,this._role=null,this._toast=null,this._tables=new Map}login(){this._auth.login()}logout(){this._auth.logout()}async init(){const t=await this._auth.init();return t?(this._user=t.user,this._role=t.role,this._db=new S(this._cfg,t.token),this._perm=new T(t.role),this._toast=k(),t):null}get user(){return this._user}get role(){return this._role}get isLoggedIn(){return!!this._user}get db(){return this._db}async getAll(t){return this._db.getAll(this._c(t))}async query(t,s){return this._db.query(this._c(t),s)}async insert(t,s){return this._checkPerm("write",t),this._db.insert(this._c(t),s,this._user.login)}async update(t,s,e){return this._checkPerm("write",t),this._db.update(this._c(t),s,e,this._user.login)}async remove(t,s){return this._checkPerm("delete",t),this._db.remove(this._c(t),s,this._user.login)}mountTable(t,s,e){this._requireDb();const a=this._c(t),i=e?typeof e=="string"?document.querySelector(e):e:(()=>{const n=Object.assign(document.createElement("div"),{className:"gc-modal"});return document.body.appendChild(n),n})(),r=new q({collection:a,db:this._db,permissions:this._perm,user:this._user,onStatus:(n,o)=>document.dispatchEvent(new CustomEvent("gc:status",{detail:{state:n,detail:o,label:a.label}})),onToast:(n,o)=>this._toast(n,o)});return r.mount(s,i),this._tables.set(a.id||a.file,r),r}getTable(t){return this._tables.get(t)}renderLoginCard(t,s={}){const e=typeof t=="string"?document.querySelector(t):t;if(!e)return;const{repoOwner:a,repoName:i}=this._cfg;e.innerHTML=`<div class="gc-login-card">
      ${s.errorMessage?`<div class="gc-login-err">‚ö†Ô∏è ${s.errorMessage}</div>`:""}
      <div class="gc-login-icon">‚¨°</div>
      <div class="gc-login-title">${s.title||"github<em>‚Äì</em>crud"}</div>
      <div class="gc-login-desc">${s.description||`Masuk dengan GitHub untuk melanjutkan.<br/>Hanya collaborator <strong>${a}/${i}</strong> yang dapat akses.`}</div>
      <button class="gc-login-btn">
        <svg height="18" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
        Masuk dengan GitHub
      </button>
      <div class="gc-login-note">${s.note||"Kamu perlu menerima undangan collaborator terlebih dahulu."}</div>
    </div>`,e.querySelector(".gc-login-btn")?.addEventListener("click",()=>this.login())}toast(t,s="info"){(this._toast||k())(t,s)}_requireDb(){if(!this._db)throw new Error("[github-crud] Panggil await gc.init() terlebih dahulu.")}_c(t){return typeof t!="string"?t:this._cfg.collections?.find(s=>s.id===t||s.file===t)||{id:t,label:t,file:t,roles:{},schema:[]}}_checkPerm(t,s){this._requireDb();const e=this._c(s);if(!(t==="delete"?this._perm.canDelete(e):this._perm.canWrite(e)))throw new Error(`Role "${this._role}" tidak memiliki izin ${t} pada ${e.label}.`)}}typeof window<"u"&&(window.GithubCRUD=w);const f=new w({clientId:"Ov23liv5x23ks6VnU1OT",workerUrl:"https://github-crud-auth.naufal-backup.workers.dev",repoOwner:"naufal-backup",repoName:"crud-sederhana",roles:["admin","editor"]}),E={id:"produk",label:"Produk",file:"data/produk.json",roles:{admin:"all",editor:"write"},schema:[{key:"id",label:"ID",type:"number",auto:!0,readonly:!0},{key:"nama",label:"Nama",type:"text",required:!0},{key:"harga",label:"Harga",type:"number",min:0}]},x=await f.init();x?f.mountTable(E,"#app"):f.renderLoginCard("#app");
